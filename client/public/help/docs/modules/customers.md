# Customer Master Module

## Overview

The Customer Master module is your central database for managing all customer information, contact details, and customer relationships. It serves as the foundation for all customer interactions, project management, and business operations in the CRM.

## Customer Creation

### Who Can Create Customers

- **Sales users**: Can create customers for their own use
- **Administrators**: Can create customers for any salesperson

### Creating a New Customer

**Step 1: Access Customer Master**
1. Go to **Customers** page from the top menu
2. Click **New Customer** button (top right)

**Step 2: Fill in Customer Information**

**Name Fields** (Required for Individual Customers):
- **Prefix**: Select from Mr., Ms., Mrs., Miss, Mx., Dr., Prof., or None
- **First Name**: *Required* - Customer's first name
- **Middle Name**: Optional - Middle name
- **Last Name**: Optional - Last name

**Note**: For individual customers, you can use either:
- Individual name fields (Prefix, First Name, Middle Name, Last Name), OR
- Customer Name field (for business/company names)

**Address Information**:
- **Address Line 1**: Street address, P.O. Box, etc.
- **Address Line 2**: Apartment, suite, unit, building, floor, etc.
- **Country**: Select from dropdown (required for state/city selection)
- **State**: Select from dropdown (appears after country selection)
- **City**: Select from dropdown (appears after state selection)
- **Pin Code**: Postal/ZIP code (up to 10 characters)

**Location Mapping**:
- **Map Selector**: Click to open map and set customer location coordinates
- Use map to pinpoint exact customer location
- Coordinates are saved automatically when you set location on map

**Contact Information**:
- **Contact Numbers**: 
  - Add one or more phone numbers
  - Click "+ Add Contact Number" to add additional numbers
  - At least one contact number is required
  - Remove numbers using "Remove" button
- **Email IDs**:
  - Add one or more email addresses
  - Click "+ Add E-mail ID" to add additional emails
  - Remove emails using "Remove" button

**Business Information**:
- **DISCOM Consumer Number**: Consumer number from electricity board
- **Company Name**: For commercial customers
- **Company GST#**: GST number for business customers

**Identification**:
- **Id Proof#**: ID proof number (Aadhaar, PAN, etc.)
- **Type of Id Proof**: *Required if Id Proof# is provided*
  - Options: Aadhaar, PAN, Voters Card, DL, Passport, Others

**Salesperson Assignment** (Management and Admin only):
- **Salesperson**: Assign customer to a sales team member
- Only Management and Admin can change salesperson assignment
- Sales users cannot change this field

**Step 3: Save Customer**
1. Review all information for accuracy
2. Click **Create** button
3. Customer is created and assigned a unique Customer ID
4. You'll see a success message

### Customer ID Generation

- Customer ID is automatically generated by the system
- Format: Sequential number (SL No)
- Cannot be changed after creation
- Used to uniquely identify customers

### Required Fields

**Minimum Required**:
- Either Customer Name OR First Name (for individual customers)
- At least one Contact Number

**Conditional Requirements**:
- Type of Id Proof is required if Id Proof# is provided
- State selection requires Country to be selected first
- City selection requires State to be selected first

### Customer Creation Best Practices

**Complete Information**:
- Fill in all available fields for better tracking
- Add multiple contact numbers if customer has them
- Include email addresses for communication
- Set location coordinates for service planning

**Accuracy**:
- Verify contact information before saving
- Double-check addresses for accuracy
- Ensure consumer numbers are correct
- Validate GST numbers for commercial customers

**Organization**:
- Use consistent naming conventions
- Keep customer names standardized
- Maintain accurate address information
- Update information regularly

## Customer Segmentation

### Understanding Segmentation

Customer segmentation helps you organize and analyze your customer base by different criteria, enabling better customer management and strategic planning.

### Segmentation by Customer Type

**Customer Types Available**:
- **Residential**: Individual homeowners
- **Apartment**: Apartment complex or housing society
- **Commercial**: Business or commercial establishments

**How to View by Type**:
- Customer type is set when creating projects linked to the customer
- View customers by filtering projects by type
- Analyze customer distribution by type

### Segmentation by Salesperson

**Salesperson Assignment**:
- Customers can be assigned to specific sales team members
- Assignment helps track customer ownership
- Useful for performance analysis and customer management

**Viewing by Salesperson**:
- **Sales Users**: 
  - Toggle between "My Customers" and "All Customers"
  - "My Customers" shows customers assigned to you or where you created projects
  - "All Customers" shows all customers (view-only)
- **Other Users**:
  - Use Sales Person filter dropdown
  - Select one or more salespersons
  - View customers for selected salespersons
  - Leave empty to see all customers

**Filtering by Salesperson**:
1. Go to Customers page
2. For Sales users: Toggle "My Customers" / "All Customers"
3. For other users: Select salesperson(s) from dropdown
4. Customer list updates automatically

### Segmentation by Location

**Geographic Segmentation**:
- Filter by Country, State, or City
- Use address information for location-based analysis
- Map coordinates enable geographic visualization

**Location-Based Analysis**:
- Identify customer concentration areas
- Plan service coverage
- Analyze regional performance
- Optimize resource allocation

### Segmentation by Project Status

**Viewing Customers by Project Status**:
- Filter projects by status
- View customers associated with projects in specific statuses
- Analyze customer pipeline
- Track customer conversion

**Project Status Categories**:
- **Early Stage**: Lead, Site Survey, Proposal
- **Active**: Confirmed, Installation
- **Completed**: Completed, Completed - Subsidy Credited
- **Lost**: Lost projects

### Segmentation Best Practices

**Regular Analysis**:
- Review customer segments monthly
- Identify trends in customer types
- Analyze salesperson performance
- Track geographic distribution

**Strategic Planning**:
- Use segmentation for market analysis
- Plan sales team assignments
- Identify growth opportunities
- Optimize customer service

## Profitability Tracking

### Understanding Customer Profitability

Customer profitability measures the profit generated from each customer's projects. This helps identify your most valuable customers and guides strategic customer relationship management.

### Viewing Customer Profitability

**From Dashboard**:
- **Customer Profitability Word Cloud**: 
  - Visual representation of most profitable customers
  - Larger text = higher profitability
  - Located on Management and Sales dashboards
  - Filter by Financial Year and Month

**From Project Details**:
- View individual project profitability
- See profit per project for each customer
- Track profitability over time

**From Customer View**:
- See all projects for a customer
- View total project value
- Calculate combined profitability
- Track customer value

### Profitability Calculation

**How Profitability is Calculated**:
- **Gross Profit** = Project Value - Total Project Cost
- Calculated automatically for each project
- Aggregated by customer for word cloud
- Based on completed projects

**Profitability Metrics**:
- **Per Project**: Profit from individual projects
- **Per Customer**: Combined profit from all customer's projects
- **By Period**: Profitability by Financial Year or Month
- **By Type**: Profitability by project type

### Using Profitability Data

**Identifying Key Customers**:
- Word cloud highlights most profitable customers
- Larger names indicate higher profitability
- Focus on top customers for relationship management
- Plan strategies for high-value customers

**Strategic Decisions**:
- Prioritize high-profitability customers
- Allocate resources to valuable relationships
- Develop retention strategies
- Plan customer engagement

**Performance Analysis**:
- Compare customer profitability
- Track profitability trends
- Identify growth opportunities
- Measure customer value

### Profitability Best Practices

**Regular Monitoring**:
- Review word cloud regularly
- Track profitability trends
- Identify changes in customer value
- Monitor top customers

**Strategic Actions**:
- Focus on high-profitability customers
- Develop strategies for low-profitability customers
- Plan customer retention programs
- Optimize customer relationships

## Relationship to Projects

### Understanding Customer-Project Relationship

Every project in the CRM is linked to a customer. This relationship enables comprehensive customer management, project tracking, and business analysis.

### How Customers Link to Projects

**Project Creation**:
- When creating a project, you must select or create a customer
- Customer is linked to project during creation
- One customer can have multiple projects
- Projects cannot exist without a customer

**Linking Process**:
1. Create customer first (or use existing customer)
2. Create project and select the customer
3. Project is automatically linked to customer
4. Relationship is permanent (cannot be changed)

### Viewing Customer Projects

**From Customer Master Page**:
- Customer list shows project count badge
- Badge displays number of projects for each customer
- Click on customer to view details (if detail page available)

**From Project Pages**:
- Projects show customer name
- Click customer name to view customer information
- Filter projects by customer using search

**From Customer Detail** (if available):
- View all projects for a customer
- See project status and details
- Track project history
- Monitor customer relationship

### Customer Project Information

**What You Can See**:
- **Project Count**: Number of projects per customer
- **Project Status**: Status of each project
- **Project Value**: Total value of customer's projects
- **Project History**: Timeline of customer's projects
- **Payment Status**: Payment information across projects

**Project Details Available**:
- Project ID and status
- Project value and cost
- Payment information
- Installation dates
- Support tickets
- Documents

### Managing Customer Relationships

**Multiple Projects per Customer**:
- Customers can have multiple projects
- Each project is tracked separately
- Combined view shows total customer value
- Useful for repeat customers

**Customer History**:
- View all projects for a customer
- Track customer journey over time
- Monitor customer engagement
- Identify repeat business opportunities

**Customer Value**:
- Total project value across all projects
- Combined profitability
- Payment history
- Overall customer relationship value

### Customer-Project Workflow

**New Customer Workflow**:
1. Create customer in Customer Master
2. Create first project linked to customer
3. Customer relationship established
4. Track project through lifecycle

**Existing Customer Workflow**:
1. Search for existing customer
2. Create new project and select customer
3. Project linked to existing customer
4. Customer history updated

**Customer Management**:
- Keep customer information current
- Update contact details as needed
- Track all customer projects
- Monitor customer relationships

## Managing Customers

### Editing Customer Information

**Who Can Edit**:
- **Sales users**: Can edit their own customers (in "My Customers" view)
- **Administrators**: Can edit any customer
- **Management**: Can view but not edit

**How to Edit**:
1. Go to Customers page
2. Find the customer using search or filters
3. Click **Edit** button next to customer
4. Update information as needed
5. Click **Update** to save changes

**What Can Be Edited**:
- All customer information fields
- Contact numbers and emails
- Address details
- Business information
- Location coordinates
- Salesperson assignment (Management/Admin only)

### Viewing Customer Details

**From Customer List**:
- See customer name and ID
- View address information
- See contact numbers and emails
- Check project count
- View creation date

**Customer Information Displayed**:
- Customer name (or individual name components)
- Customer ID badge
- Project count badge
- Address (if available)
- Consumer number (if available)
- Contact information
- Email addresses

### Searching Customers

**Search Functionality**:
- Search bar at top of Customer Master page
- Searches across multiple fields:
  - Customer name
  - Customer ID
  - Consumer number
- Real-time search with 500ms debounce
- Case-insensitive search

**Search Tips**:
- Use partial matches (e.g., "solar" finds "Solar Energy")
- Search by customer ID for quick lookup
- Use consumer number for utility-related searches
- Clear search to see all customers

### Filtering Customers

**Available Filters**:
- **Salesperson Filter** (non-Sales users):
  - Select one or more salespersons
  - View customers for selected salespersons
  - Leave empty to see all customers
- **My Customers / All Customers** (Sales users):
  - Toggle between your customers and all customers
  - "My Customers" shows customers you created or are assigned to
  - "All Customers" shows all customers (view-only)

**Filter Behavior**:
- Filters apply immediately
- Can combine with search
- Pagination resets when filters change
- Clear filters to see all customers

### Exporting Customer Data

**Who Can Export**:
- Administrators only

**Export Formats**:
- **Excel (.xlsx)**: Spreadsheet format
- **CSV (.csv)**: Comma-separated values

**How to Export**:
1. Apply any filters you want in export
2. Click **Export to Excel** or **Export to CSV**
3. Read and accept export confirmation
4. Click **YES** to confirm
5. File downloads automatically

**Export Includes**:
- All customer information
- Current filter settings
- Search results (if search applied)
- Salesperson filter (if applied)

## Best Practices

### Data Entry

**Completeness**:
- Fill in all available fields
- Add multiple contact methods
- Include complete address information
- Set location coordinates
- Add business information for commercial customers

**Accuracy**:
- Verify contact information
- Double-check addresses
- Validate consumer numbers
- Ensure GST numbers are correct
- Keep information current

**Consistency**:
- Use consistent naming conventions
- Standardize address formats
- Maintain uniform data entry
- Follow company guidelines

### Customer Relationship Management

**Regular Updates**:
- Update contact information when it changes
- Keep addresses current
- Maintain accurate business information
- Review customer data regularly

**Relationship Tracking**:
- Monitor customer projects
- Track customer value
- Identify repeat customers
- Plan customer engagement

**Communication**:
- Use multiple contact methods
- Keep contact information current
- Maintain customer communication history
- Document important interactions

### Segmentation and Analysis

**Regular Review**:
- Review customer segments monthly
- Analyze customer distribution
- Track salesperson assignments
- Monitor geographic distribution

**Strategic Planning**:
- Use segmentation for market analysis
- Plan sales team assignments
- Identify growth opportunities
- Optimize customer service

### Profitability Management

**Monitoring**:
- Review profitability word cloud regularly
- Track customer value trends
- Identify top customers
- Monitor profitability changes

**Strategic Actions**:
- Focus on high-profitability customers
- Develop retention strategies
- Plan customer engagement
- Optimize customer relationships

## Data Privacy and Security

### Customer Information Confidentiality

**Privacy Requirements**:
- Customer information is confidential
- Only authorized users can access customer data
- Follow data privacy guidelines
- Protect customer contact information

**Access Control**:
- Role-based access to customer data
- Sales users see their own customers
- Other roles have appropriate access levels
- Export requires administrator authorization

**Data Protection**:
- Secure storage of customer information
- Encrypted data transmission
- Regular security updates
- Compliance with data protection regulations

## Troubleshooting

### Cannot Create Customer

**Issue**: "New Customer" button not visible or creation fails

**Solutions**:
- Verify you have Sales or Admin role
- Check required fields are filled
- Ensure at least one contact number is entered
- Verify form validation errors
- Contact administrator if issue persists

### Cannot Edit Customer

**Issue**: Edit button not visible or edit fails

**Solutions**:
- Check your user role permissions
- For Sales users: Ensure you're in "My Customers" view
- Verify customer belongs to you (Sales users)
- Refresh page and try again
- Contact administrator if needed

### Search Not Working

**Issue**: Search doesn't find customers

**Solutions**:
- Check spelling of search term
- Try partial matches
- Clear search and try again
- Verify customer exists in system
- Check filters aren't restricting results

### Customer Not Linked to Project

**Issue**: Cannot find customer when creating project

**Solutions**:
- Verify customer was created successfully
- Check customer name spelling
- Use search to find customer
- Create customer first if it doesn't exist
- Contact administrator if issue persists

## Getting Help

### Using Help Features

- Press **?** from Customers page for context-sensitive help
- Click **Help** in navigation menu
- Review this guide for detailed information

### Contact Administrator

Contact administrator for:
- Cannot access customer data
- Need additional permissions
- Data appears incorrect
- Technical issues
- Questions about customer management

## Summary

The Customer Master module provides:
- **Centralized Database**: All customer information in one place
- **Segmentation**: Organize customers by type, salesperson, location
- **Profitability Tracking**: Identify most valuable customers
- **Project Integration**: Link customers to all their projects
- **Relationship Management**: Track customer interactions and value

**Key Features**:
- Create and manage customer records
- Segment customers for analysis
- Track customer profitability
- Link customers to projects
- Search and filter customers
- Export customer data (Admin only)

**Remember**:
- Customer information is the foundation of all business operations
- Keep customer data accurate and current
- Use segmentation for strategic planning
- Monitor customer profitability regularly
- Maintain strong customer relationships
